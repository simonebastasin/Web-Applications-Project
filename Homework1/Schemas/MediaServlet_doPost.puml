@startuml
participant Actor
Actor -> MediaServlet : doPost
activate MediaServlet
MediaServlet -> MediaServlet : uploadImage
activate MediaServlet
create EmptyMediaError
MediaServlet -> EmptyMediaError : new
activate EmptyMediaError
create ErrorMessage
EmptyMediaError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> EmptyMediaError
deactivate ErrorMessage
EmptyMediaError --> MediaServlet
deactivate EmptyMediaError
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
MediaServlet -> MediaServlet : scaleImage
activate MediaServlet
MediaServlet -> MediaServlet : typeBufferedImage
activate MediaServlet
MediaServlet --> MediaServlet
deactivate MediaServlet
MediaServlet --> MediaServlet
deactivate MediaServlet
create CreateMediaDatabase
MediaServlet -> CreateMediaDatabase : new
activate CreateMediaDatabase
CreateMediaDatabase --> MediaServlet
deactivate CreateMediaDatabase
MediaServlet -> CreateMediaDatabase : createMedia
activate CreateMediaDatabase
create Media
CreateMediaDatabase -> Media : new
activate Media
Media --> CreateMediaDatabase
deactivate Media
CreateMediaDatabase --> MediaServlet
deactivate CreateMediaDatabase
create Message
MediaServlet -> Message : new
activate Message
Message --> MediaServlet
deactivate Message
MediaServlet -> AbstractServlet : writeResource
activate AbstractServlet
AbstractServlet -> Resource : toJSON
activate Resource
Resource --> AbstractServlet
deactivate Resource
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet -> AbstractServlet : decapitalize
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet -> Resource : toJSON
activate Resource
Resource --> AbstractServlet
deactivate Resource
AbstractServlet -> AbstractServlet : decapitalize
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet -> Resource : toJSON
activate Resource
Resource --> AbstractServlet
deactivate Resource
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
create ListProductCategoryDatabase
AbstractServlet -> ListProductCategoryDatabase : new
activate ListProductCategoryDatabase
ListProductCategoryDatabase --> AbstractServlet
deactivate ListProductCategoryDatabase
AbstractServlet -> AbstractServlet : decapitalize
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet -> AbstractServlet : decapitalize
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
create SqlInternalError
AbstractServlet -> SqlInternalError : new
activate SqlInternalError
create ErrorMessage
SqlInternalError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> SqlInternalError
deactivate ErrorMessage
SqlInternalError --> AbstractServlet
deactivate SqlInternalError
AbstractServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
create UploadError
MediaServlet -> UploadError : new
activate UploadError
create ErrorMessage
UploadError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> UploadError
deactivate ErrorMessage
UploadError --> MediaServlet
deactivate UploadError
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
create SqlInternalError
MediaServlet -> SqlInternalError : new
activate SqlInternalError
create ErrorMessage
SqlInternalError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> SqlInternalError
deactivate ErrorMessage
SqlInternalError --> MediaServlet
deactivate SqlInternalError
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
MediaServlet --> MediaServlet
deactivate MediaServlet
MediaServlet -> MediaServlet : doGet
activate MediaServlet
create ListMediaDatabase
MediaServlet -> ListMediaDatabase : new
activate ListMediaDatabase
ListMediaDatabase --> MediaServlet
deactivate ListMediaDatabase
MediaServlet -> AbstractServlet : writeResource
activate AbstractServlet
AbstractServlet -> Resource : toJSON
activate Resource
Resource --> AbstractServlet
deactivate Resource
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet -> AbstractServlet : decapitalize
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet -> Resource : toJSON
activate Resource
Resource --> AbstractServlet
deactivate Resource
AbstractServlet -> AbstractServlet : decapitalize
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet -> Resource : toJSON
activate Resource
Resource --> AbstractServlet
deactivate Resource
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
create ListProductCategoryDatabase
AbstractServlet -> ListProductCategoryDatabase : new
activate ListProductCategoryDatabase
ListProductCategoryDatabase --> AbstractServlet
deactivate ListProductCategoryDatabase
AbstractServlet -> AbstractServlet : decapitalize
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet -> AbstractServlet : decapitalize
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
create SqlInternalError
AbstractServlet -> SqlInternalError : new
activate SqlInternalError
create ErrorMessage
SqlInternalError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> SqlInternalError
deactivate ErrorMessage
SqlInternalError --> AbstractServlet
deactivate SqlInternalError
AbstractServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
create SqlInternalError
MediaServlet -> SqlInternalError : new
activate SqlInternalError
create ErrorMessage
SqlInternalError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> SqlInternalError
deactivate ErrorMessage
SqlInternalError --> MediaServlet
deactivate SqlInternalError
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
MediaServlet -> AbstractServlet : writeJsp
activate AbstractServlet
create ListProductCategoryDatabase
AbstractServlet -> ListProductCategoryDatabase : new
activate ListProductCategoryDatabase
ListProductCategoryDatabase --> AbstractServlet
deactivate ListProductCategoryDatabase
create SqlInternalError
AbstractServlet -> SqlInternalError : new
activate SqlInternalError
create ErrorMessage
SqlInternalError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> SqlInternalError
deactivate ErrorMessage
SqlInternalError --> AbstractServlet
deactivate SqlInternalError
AbstractServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
MediaServlet -> MediaServlet : writeImage
activate MediaServlet
create GetMediaDatabase
MediaServlet -> GetMediaDatabase : new
activate GetMediaDatabase
GetMediaDatabase --> MediaServlet
deactivate GetMediaDatabase
create GetMediaByteFromMediaDatabase
MediaServlet -> GetMediaByteFromMediaDatabase : new
activate GetMediaByteFromMediaDatabase
GetMediaByteFromMediaDatabase --> MediaServlet
deactivate GetMediaByteFromMediaDatabase
MediaServlet -> AbstractServlet : writeBlob
activate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
create EmptyMediaError
MediaServlet -> EmptyMediaError : new
activate EmptyMediaError
create ErrorMessage
EmptyMediaError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> EmptyMediaError
deactivate ErrorMessage
EmptyMediaError --> MediaServlet
deactivate EmptyMediaError
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
create MediaNotFoundError
MediaServlet -> MediaNotFoundError : new
activate MediaNotFoundError
create ErrorMessage
MediaNotFoundError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> MediaNotFoundError
deactivate ErrorMessage
MediaNotFoundError --> MediaServlet
deactivate MediaNotFoundError
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
create SqlInternalError
MediaServlet -> SqlInternalError : new
activate SqlInternalError
create ErrorMessage
SqlInternalError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> SqlInternalError
deactivate ErrorMessage
SqlInternalError --> MediaServlet
deactivate SqlInternalError
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> GenericError : toJSON
activate GenericError
GenericError --> AbstractServlet
deactivate GenericError
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
MediaServlet --> MediaServlet
deactivate MediaServlet
MediaServlet -> MediaServlet : writeImage
activate MediaServlet
create GetMediaDatabase
MediaServlet -> GetMediaDatabase : new
activate GetMediaDatabase
GetMediaDatabase --> MediaServlet
deactivate GetMediaDatabase
create GetMediaByteFromMediaDatabase
MediaServlet -> GetMediaByteFromMediaDatabase : new
activate GetMediaByteFromMediaDatabase
GetMediaByteFromMediaDatabase --> MediaServlet
deactivate GetMediaByteFromMediaDatabase
MediaServlet -> AbstractServlet : writeBlob
activate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
create EmptyMediaError
MediaServlet -> EmptyMediaError : new
activate EmptyMediaError
create ErrorMessage
EmptyMediaError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> EmptyMediaError
deactivate ErrorMessage
EmptyMediaError --> MediaServlet
deactivate EmptyMediaError
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
create MediaNotFoundError
MediaServlet -> MediaNotFoundError : new
activate MediaNotFoundError
create ErrorMessage
MediaNotFoundError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> MediaNotFoundError
deactivate ErrorMessage
MediaNotFoundError --> MediaServlet
deactivate MediaNotFoundError
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
create SqlInternalError
MediaServlet -> SqlInternalError : new
activate SqlInternalError
create ErrorMessage
SqlInternalError -> ErrorMessage : new
activate ErrorMessage
create Message
ErrorMessage -> Message : new
activate Message
Message --> ErrorMessage
deactivate Message
ErrorMessage --> SqlInternalError
deactivate ErrorMessage
SqlInternalError --> MediaServlet
deactivate SqlInternalError
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> Message : toJSON
activate Message
Message --> AbstractServlet
deactivate Message
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> GenericError : toJSON
activate GenericError
GenericError --> AbstractServlet
deactivate GenericError
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
MediaServlet --> MediaServlet
deactivate MediaServlet
MediaServlet -> AbstractServlet : writeError
activate AbstractServlet
AbstractServlet -> GenericError : toJSON
activate GenericError
GenericError --> AbstractServlet
deactivate GenericError
AbstractServlet -> AbstractServlet : writeJSON
activate AbstractServlet
AbstractServlet --> AbstractServlet
deactivate AbstractServlet
AbstractServlet --> MediaServlet
deactivate AbstractServlet
MediaServlet --> MediaServlet
deactivate MediaServlet
return
@enduml