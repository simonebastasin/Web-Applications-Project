\subsection{REST API Details}

%List here a few resources retrievable via REST API

\subsubsection*{Buy a product}

This API returns a new order with a single product

\begin{itemize}
    \item URL: \texttt{/buy/product/}
    \item Method: \texttt{POST}
    \item URL Parameters: \textit{product alias}
    \item Data Parameters: \textit{quantity}: the quantity of the product
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Object with the order ID.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.

\end{itemize}

\subsubsection*{Buy a list product}

This API returns a list of products and a list of categories

\begin{itemize}
    \item URL: \texttt{/rest/cart/}
    \item Method: \texttt{POST}
    \item URL Parameters: Nothing
    \item Data Parameters: a JSON Object that contains a JSON Array on the \texttt{cart} key. The JSON Array contains some instances of a JSON Object  containing the alias of the product and the quantity. Like:
    \texttt{{"cart":[{"quantity":2,"alias":"6465661284410"},{"quantity":3,"alias":"6465661284414"}]}}
    \item Data Parameters encoding: \texttt{application/json}
    \item Success Response:  a JSON Object with the order ID.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.

\end{itemize}

\subsubsection*{Pay an order}

This API returns a list of products and a list of categories

\begin{itemize}
    \item URL: \texttt{/rest/pay/}
    \item Method: \texttt{POST}
    \item URL Parameters: \textit{order ID}
    \item Data Parameters: \texttt{payment} with a value among \texttt{CREDIT\_CARD}, \texttt{GOOGLE\_PAY}, \texttt{APPLE\_PAY}.
    \item Success Response: a JSON message whit transaction ID
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.

\end{itemize}

\subsubsection*{Cancel an order}

This API cancels an order

\begin{itemize}
    \item URL: \texttt{/rest/cancel/}
    \item Method: \texttt{POST}
    \item URL Parameters: \textit{order ID}
    \item Data Parameters: NOTHING
    \item Success Response: a JSON message
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.

\end{itemize}

\subsubsection*{List of products and categories}

This API returns a list of products and a list of categories

\begin{itemize}
    \item URL: \texttt{/rest/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object with a productCategory list and a product list.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.

\end{itemize}

\subsubsection*{List of products and categories}

This API returns a list of products and a list of categories

\begin{itemize}
    \item URL: \texttt{/rest/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object with a productCategory list and a product list.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
    
\end{itemize}

\subsubsection*{Product detail}

This API returns the product detail

\begin{itemize}
    \item URL: \texttt{/rest/products/details/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: \textit{product alias}
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object with the product
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Products of a category}

This API returns a list of product belonging to a category

\begin{itemize}
    \item URL: \texttt{/rest/products/category/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: \textit{category name}
    \item Data Parameters: Nothing
    \item Success Response: a JSON Array with the product list  belonging to the category
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Search product}

This API returns a list of products that match the search keyword

\begin{itemize}
    \item URL: \texttt{/rest/products/search/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: Nothing
    \item Data Parameters: \texttt{q}: a query keyword
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Array with the product list  that match the search keyword
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Media list}

This API returns a list of media

\begin{itemize}
    \item URL: \texttt{/rest/media/list/}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Array with the media list
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Media list}

This API returns a list of media

\begin{itemize}
    \item URL: \texttt{/rest/media/list/}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Array with the media list
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Upload media}

This API is used to load a media in the database

\begin{itemize}
    \item URL: \texttt{/rest/media/upload/}
    \item Method: \texttt{POST}
    \item URL Parameters: Nothing
    \item Data Parameters: \texttt{file}: the file to be upload
    \item Data Parameters encoding: \texttt{multipart/form-data}
    \item Success Response: a JSON Object with the media ID
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Media view}

This API returns a media

\begin{itemize}
    \item URL: \texttt{/rest/media/view/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: \textit{media ID}
    \item Data Parameters: Nothing
    \item Success Response: a blob with media
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Media thumb view}

This API returns a thumb of a media

\begin{itemize}
    \item URL: \texttt{/rest/media/thumb/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: \textit{media ID}
    \item Data Parameters: Nothing
    \item Success Response: a blob with thumb of the media
    \item Error Response: a JSON Objec: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{Order list}

This API returns a list of the orders.
If the logged-in user is a customer, it is only possible to see their own orders, if employee all of them.

\begin{itemize}
    \item URL: \texttt{/rest/order/list/}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Array that contains the order list
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Order detail}

This API returns the details of an order.
If the logged-in user is a customer, it is only possible to see their own orders, if employee all of them.

\begin{itemize}
    \item URL: \texttt{/rest/order/detail/}
    \item Method: \texttt{GET}
    \item URL Parameters: \textit{order ID}
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object that contains the order detail
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{Invoice list}

This API returns a list of the invoices.
If the logged-in user is a customer, it is only possible to see their own invoices, if employee all of them.

\begin{itemize}
    \item URL: \texttt{/rest/invoice/list/}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response:  a JSON Array that contains the invoice list
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Invoice detail}

This API returns the details of an invoice.
If the logged-in user is a customer, it is only possible to see their own invoices, if employee all of them.

\begin{itemize}
    \item URL: if you want to access it with the invoice ID \texttt{/rest/invoice/detail/} or if you want to access it with the order ID \texttt{/rest/invoice/order/}
    \item Method: \texttt{GET}
    \item URL Parameters: if you want to access it with the invoice ID \textit{invoice ID} or if you want to access it with the order ID \textit{order ID}
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object that contains the invoice detail
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Create ticket}

This API creates a ticket.

\begin{itemize}
    \item URL: \texttt{/rest/ticket/create/}
    \item Method: \texttt{POST}
    \item URL Parameters: \textit{product alias}
    \item Data Parameters: \texttt{description}: the description of ticket
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Object that contains the newly created ticket
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Ticket list}

This API returns a list of the tickets.
If the logged-in user is a customer, it is only possible to see their own tickets, if employee all of them.

\begin{itemize}
    \item URL: \texttt{/rest/ticket/list/}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response:  a JSON Array that contains the ticket list
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Ticket detail}

This API returns the details of a ticket.
If the logged-in user is a customer, it is only possible to see their own tickets, if employee all of them.

\begin{itemize}
    \item URL: \texttt{/rest/ticket/detail/}
    \item Method: \texttt{GET}
    \item URL Parameters: \textit{invoice ID}
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object that contains the ticket detail
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{Respond ticket}

This API lets respond to ticket with a new ticket status.

\begin{itemize}
    \item URL: \texttt{/rest/ticket/respond/}
    \item Method: \texttt{POST}
    \item URL Parameters: \textit{ticket ID}
    \item Data Parameters:
    \begin{itemize}
        \item \texttt{status}: a value among \texttt{OPEN}, \texttt{PROCESSING}, \texttt{CLOSED}. \texttt{RETURN}
        \item \texttt{description}: the description of ticket
    \end{itemize}
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Object that contains the new ticket response
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{User info}

This API returns the info of current logged user.

\begin{itemize}
    \item URL: \texttt{/rest/user/info}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object that contains the user info
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{User modify}

This API allows to modify a generic user informations.

\begin{itemize}
    \item URL: \texttt{/rest/user/modify}
    \item Method: \texttt{POST}
    \item URL Parameters: Nothing
    \item Data Parameters:
    \begin{itemize}
        \item \texttt{name}: the name
        \item \texttt{surname}: the surname
        \item \texttt{fiscalCode}: the fiscal code (only customer)
        \item \texttt{address}: the address (only customer)
        \item \texttt{phoneNumber}: the phone number (only customer)
        \item \texttt{role}: the role (only employee, to be discontinued)
    \end{itemize}
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Object that contains the new user info
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{User modify password}

This API allows to modify the password of the logged user.

\begin{itemize}
    \item URL: \texttt{/rest/user/password}
    \item Method: \texttt{POST}
    \item URL Parameters: Nothing
    \item Data Parameters:
    \begin{itemize}
        \item \texttt{oldPassword}: the old password
        \item \texttt{newPassword}: the new password
    \end{itemize}
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Object that contains password changed
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}



\subsubsection*{Product list}
This API returns the list of products.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Array that contains product list 
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Create product}
This API returns the category and the list of media used to create a new product.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement/createProduct}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: 
    \begin{itemize}
        \item alias: set the alias
        \item name: set the name
        \item brand: set the brand of the product
        \item description: set the description of the product
        \item purchase: set the purchase sale
        \item sale: set the sale price
        \item quantity: set the initial quantity
        \item category: set the category of the product
        \item evidence: set if the product should be in evidence
        \item media: list of media that must be associated with the product
    \end{itemize}
    
    a JSON Object containing information of the new product
    \item Success Response: e: a JSON Object with a productCategoryList end mediaList
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{Edit product}
This API returns an Object Product with the new attributes and its list of all media associated to it.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement/editProduct}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: productAlias
    \item Data Parameters: 
    \begin{itemize}
        \item alias: set the alias
        \item name: set the name
        \item brand: set the brand of the product
        \item description: set the description of the product
        \item purchase: set the purchase sale
        \item sale: set the sale price
        \item quantity: set the initial quantity
        \item category: set the category of the product
        \item evidence: set if the product should be in evidence
        \item media: list of media that must be associated with the product
    \end{itemize}
    \item Success Response: e: a JSON Object product end media list
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}



\subsubsection*{Delete product}
This API returns an Object Product.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement/deleteProduct}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: productAlias
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Object product
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{Discounts list}
This API returns a list of Object Discount.

\begin{itemize}
    \item URL: \texttt{/rest/management/discountManagement}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Array that contains discounts and for each discount we have a vector of associated products
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Create discount}
This API returns a list of Object Products used for creating new discount.

\begin{itemize}
    \item URL: \texttt{/rest/management/discountManagement/createDiscount}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: 
    \begin{itemize}
        \item percentage: percentage of new discount
        \item start: discount start date
        \item end: discount end date
        \item productList: list of the products to discount
    \end{itemize} 
    \item Success Response: e: a JSON Array that contains products that will be chosen
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Edit discount}
This API returns an Object Discount and a list of all products.

\begin{itemize}
    \item URL: \texttt{/rest/management/discountManagement/updateDiscount}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: idDiscount
    \item Data Parameters: 
    \begin{itemize}
        \item percentage: percentage of new discount
        \item start: discount start date
        \item end: discount end date
        \item productList: list of the products to discount
    \end{itemize}
    \item Success Response: e: a JSON Object of discount with associated products, and an Array of all products 
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Delete discount}
This API returns an Object Discount

\begin{itemize}
    \item URL: \texttt{/rest/management/discountManagement/deleteDiscount}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: idDiscount
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Object of discount and an Array of associated products. 
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Customer list}
This API returns an Array of customer

\begin{itemize}
    \item URL: \texttt{/rest/management/customerManagement}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Array of customer.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Edit customer}
This API returns the customer
\begin{itemize}
    \item URL: \texttt{/rest/management/customerManagement/editCustomer}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: idCustomer
    \item Data Parameters: name, surname, fiscalCode, address, email, phoneNumber.
    \item Success Response: e: a JSON Object of customer.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Delete customer}
This API returns the Object Customer to delete
\begin{itemize}
    \item URL: \texttt{/rest/management/customerManagement/deleteCustomer}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: idCustomer
    \item Data Parameters: Nothing.
    \item Success Response: e: a JSON Object of customer.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Employee list}
This API returns the list of all employees. 

\begin{itemize}
    \item URL: \texttt{/rest/management/employeeManagement}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Array of employee.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Create employee}
This API return the list of all roles.

\begin{itemize}
    \item URL: \texttt{/rest/management/employeeManagement/createEmployee}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: name, surname, role.
    \item Success Response: e: a JSON Array of roles.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Edit employee}
This API returns an Object Employee and a list of roles.
\begin{itemize}
    \item URL: \texttt{/rest/management/employeeManagement/editEmployee}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: username
    \item Data Parameters: name, surname, role.
    \item Success Response: e: a JSON object of employee and an Array of roles.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Delete employee}
This API returns the Object Employee that has deleted
\begin{itemize}
    \item URL: \texttt{/rest/management/employeeManagement/deleteEmployee}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: username
    \item Data Parameters: Nothing.
    \item Success Response: e: a JSON object of employee to delete.
    \item Error Response: a JSON Object with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}