\subsection{REST API Details}

%List here a few resources retrievable via REST API

\subsubsection*{Buy a product}

This API returns create an order with single product

\begin{itemize}
    \item URL: \texttt{/buy/product/}
    \item Method: \texttt{POST}
    \item URL Parameters: \textit{product alias}
    \item Data Parameters: \textit{quantity}: the quantity of the product
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Object with the order ID.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.

\end{itemize}

\subsubsection*{Buy a list product}

This API returns a list of products and a list of categories

\begin{itemize}
    \item URL: \texttt{/rest/cart/}
    \item Method: \texttt{POST}
    \item URL Parameters: Nothing
    \item Data Parameters: a JSON Object that contains a JSON Array on the \texttt{cart} key. The JSON Array it contains some instances of a JSON Object  containing the alias of the product and the quantity. Like:
    \texttt{{"cart":[{"quantity":2,"alias":"6465661284410"},{"quantity":3,"alias":"6465661284414"}]}}
    \item Data Parameters encoding: \texttt{application/json}
    \item Success Response:  a JSON Object with the order ID.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.

\end{itemize}

\subsubsection*{Pay an order}

This API returns a list of products and a list of categories

\begin{itemize}
    \item URL: \texttt{/rest/pay/}
    \item Method: \texttt{POST}
    \item URL Parameters: \textit{order ID}
    \item Data Parameters: \texttt{payment} a value among \texttt{CREDIT\_CARD}, \texttt{GOOGLE\_PAY}, \texttt{APPLE\_PAY}.
    \item Success Response: a JSON message whit transaction ID
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.

\end{itemize}

\subsubsection*{Cancel an order}

This API cancel an order

\begin{itemize}
    \item URL: \texttt{/rest/cancel/}
    \item Method: \texttt{POST}
    \item URL Parameters: \textit{order ID}
    \item Data Parameters: NOTHING
    \item Success Response: a JSON message
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.

\end{itemize}

\subsubsection*{List of products and categories}

This API returns a list of products and a list of categories

\begin{itemize}
    \item URL: \texttt{/rest/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object with a productCategory list and a product list.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.

\end{itemize}

\subsubsection*{List of products and categories}

This API returns a list of products and a list of categories

\begin{itemize}
    \item URL: \texttt{/rest/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object with a productCategory list and a product list.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
    
\end{itemize}

\subsubsection*{Product detail}

This API returns the product detail

\begin{itemize}
    \item URL: \texttt{/rest/products/details/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: \textit{product alias}
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object with the product
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Products of a category}

This API returns a list of product belonging to a category

\begin{itemize}
    \item URL: \texttt{/rest/products/category/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: \textit{category name}
    \item Data Parameters: Nothing
    \item Success Response: a JSON Array with the product list  belonging to the category
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Search product}

This API returns a list of products that match the search keyword

\begin{itemize}
    \item URL: \texttt{/rest/products/search/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: Nothing
    \item Data Parameters: \texttt{q}: a query keyword
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Array with the product list  that match the search keyword
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Media list}

This API returns a list of media

\begin{itemize}
    \item URL: \texttt{/rest/media/list/}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Array with the media list
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Media list}

This API returns a list of media

\begin{itemize}
    \item URL: \texttt{/rest/media/list/}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Array with the media list
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Upload media}

This API is used to load a media in the database

\begin{itemize}
    \item URL: \texttt{/rest/media/upload/}
    \item Method: \texttt{POST}
    \item URL Parameters: Nothing
    \item Data Parameters: \texttt{file}: the file to be upload
    \item Data Parameters encoding: \texttt{multipart/form-data}
    \item Success Response: a JSON Object with the media ID
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Media view}

This API returns a media

\begin{itemize}
    \item URL: \texttt{/rest/media/view/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: \textit{media ID}
    \item Data Parameters: Nothing
    \item Success Response: a blob with media
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Media thumb view}

This API returns a thumb of a media

\begin{itemize}
    \item URL: \texttt{/rest/media/thumb/}
    \item Method: \texttt{GET \& POST}
    \item URL Parameters: \textit{media ID}
    \item Data Parameters: Nothing
    \item Success Response: a blob with thumb of the media
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{Order list}

This API returns a list of the orders.
If the logged-in user is a customer, it can only see their own order, if employee all of them.

\begin{itemize}
    \item URL: \texttt{/rest/order/list/}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Array that contains the order list
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Order detail}

This API returns a detail of the order.
If the logged-in user is a customer, it can only see their own order, if employee all of them.

\begin{itemize}
    \item URL: \texttt{/rest/order/detail/}
    \item Method: \texttt{GET}
    \item URL Parameters: \textit{order ID}
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object that contains the order detail
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{Invoice list}

This API returns a list of the invoice.
If the logged-in user is a customer, it can only see their own order, if employee all of them.

\begin{itemize}
    \item URL: \texttt{/rest/invoice/list/}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response:  a JSON Array that contains the invoice list
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Invoice detail}

This API returns a detail of the invoice.
If the logged-in user is a customer, it can only see their own order, if employee all of them.

\begin{itemize}
    \item URL: if you want to access it with the invoice ID \texttt{/rest/invoice/detail/} or if you want to access it with the order ID \texttt{/rest/invoice/order/}
    \item Method: \texttt{GET}
    \item URL Parameters: if you want to access it with the invoice ID \textit{invoice ID} or if you want to access it with the order ID \textit{order ID}
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object that contains the invoice detail
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Create ticket}

This API creates a ticket.

\begin{itemize}
    \item URL: \texttt{/rest/ticket/create/}
    \item Method: \texttt{POST}
    \item URL Parameters: \textit{product alias}
    \item Data Parameters: \texttt{description}: the description of ticket
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Object that contains the newly created ticket
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Ticket list}

This API returns a list of the ticket.
If the logged-in user is a customer, it can only see their own order, if employee all of them.

\begin{itemize}
    \item URL: \texttt{/rest/ticket/list/}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response:  a JSON Array that contains the ticket list
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Ticket detail}

This API returns a detail of the ticket.
If the logged-in user is a customer, it can only see their own order, if employee all of them.

\begin{itemize}
    \item URL: \texttt{/rest/ticket/detail/}
    \item Method: \texttt{GET}
    \item URL Parameters: \textit{invoice ID}
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object that contains the ticket detail
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{Respond ticket}

This API responds a ticket with ticket status.

\begin{itemize}
    \item URL: \texttt{/rest/ticket/respond/}
    \item Method: \texttt{POST}
    \item URL Parameters: \textit{ticket ID}
    \item Data Parameters:
    \begin{itemize}
        \item \texttt{status}: a value among \texttt{OPEN}, \texttt{PROCESSING}, \texttt{CLOSED}. \texttt{RETURN}
        \item \texttt{description}: the description of ticket
    \end{itemize}
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Object that contains the newly created ticket respond
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{User info}

This API returns the info of current loggated user.

\begin{itemize}
    \item URL: \texttt{/rest/user/info}
    \item Method: \texttt{GET}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: a JSON Object that contains the user info
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{User modify}

This API allows you to modify generic user information.

\begin{itemize}
    \item URL: \texttt{/rest/user/modify}
    \item Method: \texttt{POST}
    \item URL Parameters: Nothing
    \item Data Parameters:
    \begin{itemize}
        \item \texttt{name}: the name
        \item \texttt{surname}: the surname
        \item \texttt{fiscalCode}: the fiscal code (only customer)
        \item \texttt{address}: the address (only customer)
        \item \texttt{phoneNumber}: the phone number (only customer)
        \item \texttt{role}: the role (only employee, to be discontinued)
    \end{itemize}
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Object that contains the new user info
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{User modify password}

This API allows you to modify password of the logged user.

\begin{itemize}
    \item URL: \texttt{/rest/user/password}
    \item Method: \texttt{POST}
    \item URL Parameters: Nothing
    \item Data Parameters:
    \begin{itemize}
        \item \texttt{oldPassword}: the old password
        \item \texttt{newPassword}: the new password
    \end{itemize}
    \item Data Parameters encoding: \texttt{x-www-form-urlencoded}
    \item Success Response: a JSON Object that contains password changed
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}



\subsubsection*{Product list}
This API return the list of products.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Array that contains product list 
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Create product}
This API returns a list of category and media used for create a new product.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement/createProduct}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: 
    alias: set the alias, name: set the name, brand: set the brand of product, description: set the description of product, purchase: set the purchase sale, sale: set the sale price, quantity: set the initial quantity, category: set the category of product, evidence: set if the product is in evidence, media: list of media to associate with the product.
    
    a JSON Object containing information of the new product
    \item Success Response: e: a JSON Object with a productCategoryList end mediaList
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{Edit product}
This API returns an object product whit the attribute and a list of all media.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement/editProduct}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: productAlias
    \item Data Parameters: alias: set the alias, name: set the name, brand: set the brand of product, description: set the description of product, purchase: set the purchase sale, sale: set the sale price, quantity: set the initial quantity, category: set the category of product, evidence: set if the product is in evidence, media: list of media to associate with the product.
    \item Success Response: e: a JSON Object product end media list
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}



\subsubsection*{Delete product}
This API returns an object product.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement/deleteProduct}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: productAlias
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Object product
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}


\subsubsection*{Discounts list}
This API returns a list of object discount.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement/discountManagement}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Array that contains discounts and for each discount we have a vector of associated products
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Create discount}
This API returns a list of object products used for creating new discount.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement/discountManagement/createDiscount}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: percentage: percentage of new discount, start: discount start date, end: discount end date, productList: list of products to be discounted
    \item Success Response: e: a JSON Array that contains products that will be chosen
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Edit discount}
This API returns a Object discount and a list of all products.

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement/discountManagement/updateDiscount}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: idDiscount
    \item Data Parameters: percentage: percentage of new discount, start: discount start date, end: discount end date, productList: list of products to be discounted
    \item Success Response: e: a JSON Object of discount with associated products, and an Array of all products 
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Delete discount}
This API returns a Object discount

\begin{itemize}
    \item URL: \texttt{/rest/management/productManagement/discountManagement/deleteDiscount}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: idDiscount
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Object of discount and an Array of associated products. 
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Customer list}
This API returns an Array of customer

\begin{itemize}
    \item URL: \texttt{/rest/management/customerManagement}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Array of customer.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Edit customer}
This API return the customer
\begin{itemize}
    \item URL: \texttt{/rest/management/customerManagement/editCustomer
}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: idCustomer
    \item Data Parameters: name, surname, fiscalCode, address, email, phoneNumber.
    \item Success Response: e: a JSON Object of customer.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}
\subsubsection*{Delete customer}
This rest return the Customer object to delete
\begin{itemize}
    \item URL: \texttt{/rest/management/customerManagement/deleteCustomer
}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: idCustomer
    \item Data Parameters: Nothing.
    \item Success Response: e: a JSON Object of customer.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Employee list}
This API return the list of employee. 

\begin{itemize}
    \item URL: \texttt{/rest/management/employeeManagement}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: Nothing
    \item Success Response: e: a JSON Array of employee.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}
\subsubsection*{Create employee}
This API return list of roles.

\begin{itemize}
    \item URL: \texttt{/rest/management/employeeManagement/createEmployee}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: Nothing
    \item Data Parameters: name, surname, role.
    \item Success Response: e: a JSON Array of roles.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Edit employee}
This API return object of employee and a list of roles.
\begin{itemize}
    \item URL: \texttt{/rest/management/employeeManagement/editEmployee}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: username
    \item Data Parameters: name, surname, role.
    \item Success Response: e: a JSON object of employee and an Array of roles.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}

\subsubsection*{Delete employee}
This rest return the Employee object to delete.
\begin{itemize}
    \item URL: \texttt{/rest/management/employeeManagement/deleteEmployee}
    \item Method: \texttt{{GET \& POST}}
    \item URL Parameters: username
    \item Data Parameters: Nothing.
    \item Success Response: e: a JSON object of employee to delete.
    \item Error Response: a JSON Object: with a key: \texttt{isError}  and value \texttt{true}, an error code, a message and details of the error.
\end{itemize}